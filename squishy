Output "verse.lua"

-- Verse-specific versions of libraries
Module "util.encodings"		"libs/encodings.lua"
Module "util.hashes"		"libs/hashes.lua"
Module "util.logger"		"libs/logger.lua"
Module "util.sha1"		"util/sha1.lua"
Module "lib.adhoc"              "libs/adhoc.lib.lua"

-- Prosody libraries
if not GetOption("prosody") then
	AutoFetchURL "http://prosody.im/tip/?"
else
	AutoFetchURL(GetOption("prosody").."/?")
end

Module "util.stanza"		"util/stanza.lua"
Module "util.timer"		"util/timer.lua"
Module "util.termcolours"	"util/termcolours.lua"
Module "util.uuid"		"util/uuid.lua"
Module "net.dns"               "net/dns.lua"
Module "net.adns"              "net/adns.lua"
Module "net.server"		"net/server_select.lua"
Module "util.xmppstream"	"util/xmppstream.lua"
Module "util.jid"		"util/jid.lua"
Module "util.events"		"util/events.lua"
Module "util.dataforms"		"util/dataforms.lua"
Module "util.caps"		"util/caps.lua"

-- Verse plugins
local function Plugin(name)
	Module("verse.plugins."..name)("plugins/"..name..".lua")
end
Plugin "tls"
Plugin "sasl"
Plugin "bind"
Plugin "legacy"
Plugin "pubsub"
Plugin "version"
Plugin "ping"
Plugin "session"
Plugin "compression"
Plugin "blocking"
Plugin "proxy65"
Plugin "jingle"
Plugin "jingle_ft"
Plugin "jingle_s5b"
Plugin "jingle_ibb"
Plugin "presence"
Plugin "disco"
Plugin "pep"
Plugin "adhoc"
Plugin "private"
Plugin "groupchat"
Plugin "uptime"
Plugin "smacks"
Plugin "keepalive"
Plugin "roster"
Plugin "vcard"
Plugin "vcard_update"

Module "net.httpclient_listener" "net/httpclient_listener.lua"
Module "net.connlisteners" "net/connlisteners.lua"
Module "util.httpstream" "util/httpstream.lua"
Module "net.http" "net/http.lua"

Module "verse.bosh" "bosh.lua"

if GetOption "internal-bit-module" then
	Module "bit" "libs/bit.lua"
end

Module "verse.client" "client.lua"
Module "verse.component" "component.lua"

-- Main verse file
Main "init.lua"
